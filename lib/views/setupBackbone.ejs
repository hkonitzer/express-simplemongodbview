<script>
var socket = io.connect();
socket.on('connect', function () {      
       
});
var schemas = new SchemaCollection();
var collections = new C_<%=view%>View({
  model: schemas, 
  socket: socket,
  el: $('#menu'), 
  menuElem: $('<ul id="collectionList"></ul>'),
  workbenchElem: $('#workbench')
});
var temp = null;
<% 
for (var m in models) {
  
  %>
  var temp = new SchemaModel({modelName: '<%=models[m].modelName%>', keys: [] });
  <%
  var keyArray = [];
  for (var key in models[m].schema.tree) {
    keyArray.push(key);
    %>
    temp.get('keys').push('<%=key%>');    
    <%
  }
  %>
  var <%=models[m].modelName%>DataModel = Backbone.Model.extend({    
    <%
    for (var k = 0, kx = keyArray.length; k < kx; ++k) {
    %>
      <%=keyArray[k]%> : null<% if (k < kx-1) { %>,<%}%>
    <%
    }
    %>
  }, { idAttribute: '_id' });  
  temp.set('dataCollection', new DataCollection([], { model: <%=models[m].modelName%>DataModel, url: '/api/db/<%=models[m].modelName%>' }));
  schemas.add(temp);
  <%
} 
%>
collections.render();
</script>